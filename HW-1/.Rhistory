lower_bound <- Q1 - (1.5 * IQR)
upper_bound <- Q3 + (1.5 * IQR)
# Prep a results list for our booleans
results_list <- list()
# Iterate and construct the outlier boolean list
for (data_point in num_list) {
# If point falls outside of non-outlier range, then set value to TRUE
if (data_point < lower_bound | data_point > upper_bound) {
results_list <- c(results_list, TRUE)
}
# Otherwise, participant is not an outlier so set to FALSE
else {
results_list <- c(results_list, FALSE)
}
}
# Return the list
return(results_list)
}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
# Can set your local path to control exactly where this saves. Otherwise, will save in directory with the Rmd file
# knitr::opts_knit$set(root.dir = "/home/expdes/outputs/")
library(tidyverse)  # loads many useful packages
library(dplyr)
library(ggplot2)
set.seed(1)  # Ensures reproducible results
theme_set(theme_minimal())  # My personal preference for less ugly default plots
# Sources:
#   1) https://www.digitalocean.com/community/tutorials/r-read-csv-file-into-data-frame
#   2) https://stackoverflow.com/questions/13110076/function-to-concatenate-paths
#   3) https://dplyr.tidyverse.org/reference/mutate-joins.html
# Import each CSV into a dataframe
true_recall_data <- read.csv(file.path("class-data", "true_recall_summary.csv"))
false_recall_data <- read.csv(file.path("class-data", "false_recall_summary.csv"))
vviq_data <- read.csv(file.path("class-data", "VVIQ_summary.csv"))
# Merge the three data into a single data frame called class_data
class_data_recall <- full_join(true_recall_data, false_recall_data)
class_data_unfiltered <- full_join(class_data_recall, vviq_data)
class_data <- data.frame(
participant = class_data_unfiltered$participant,
encoding_strategy       = class_data_unfiltered$encoding_strategy,
interference_type       = class_data_unfiltered$interference_type,
VVIQ_score              = class_data_unfiltered$total_score,
true_recall_proportion  = class_data_unfiltered$true_recall_proportion,
false_recall_proportion = class_data_unfiltered$false_recall_proportion
)
# Log the results
knitr::kable(class_data, caption = "Class Data")
# Sources:
#   1) https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/ifelse
#   2) https://dplyr.tidyverse.org/reference/group_by.html
#   3) https://stringr.tidyverse.org/articles/stringr.html
# Group all participants by participant id
grouped_class_data <- group_by(class_data, participant)
# Create the new dataframe
participant_level_data <- summarise(grouped_class_data,
participant = first(participant),
encoding_strategy = first(encoding_strategy),
encoding_modality = ifelse(str_detect(first(encoding_strategy), "imag"), "visual", "verbal"),
encoding_depth = ifelse(str_detect(first(encoding_strategy), "single"), "shallow", "deep"),
VVIQ_score = first(VVIQ_score),
true_recall_proportion = mean(true_recall_proportion),
false_recall_proportion = mean(false_recall_proportion)
)
# Log the results
knitr::kable(participant_level_data, caption = "Participant Level Data")
# Sources:
#   1) https://www.dataquest.io/blog/how-to-create-a-dataframe-in-r/
#   2) https://www.digitalocean.com/community/tutorials/get-number-of-rows-and-columns-in-r
#   3) https://stat.ethz.ch/R-manual/R-devel/library/base/html/Arithmetic.html
#   4) https://www.spsanderson.com/steveondata/posts/2025-05-26/
#   5) https://stackoverflow.com/questions/8169323/r-concatenate-two-dataframes
# Gets the number of subjects (rows) in the actual data
num_rows <- nrow(participant_level_data)
# Floor division to handle odd num participants (not true here but why not future-proof)
half_rows <- num_rows %/% 2
# Floor division to handle odd num participants (not true here but why not future-proof)
quarter_rows <- half_rows %/% 2
# make data for verbal condition
set.seed(67)
# verbal shallow data
verbal_shallow_a <- data.frame(
participant             = 1:quarter_rows,
encoding_strategy       = "verb_single",
encoding_modality       = "verbal",
encoding_depth          = "shallow",
VVIQ_score              = sample(21:80, quarter_rows),
true_recall_proportion  = rnorm(quarter_rows, mean = 0.30, sd = 0.1),
false_recall_proportion = rnorm(quarter_rows, mean = 0.50, sd = 0.25)
)
# verbal deep data
verbal_deep_a <- data.frame(
participant             = (quarter_rows + 1):half_rows,
encoding_strategy       = "verb_association",
encoding_modality       = "verbal",
encoding_depth          = "deep",
VVIQ_score              = sample(21:80, half_rows - quarter_rows),
true_recall_proportion  = rnorm(half_rows - quarter_rows, mean = 0.30, sd = 0.1),
false_recall_proportion = rnorm(half_rows - quarter_rows, mean = 0.50, sd = 0.25)
)
# Get the verbal part of the data set
verbal_data_a <- rbind(verbal_shallow_a, verbal_deep_a)
# make data for visual condition
set.seed(75)
# visual shallow data
visual_shallow_a <- data.frame(
participant             = (half_rows + 1):(half_rows + quarter_rows),
encoding_strategy       = "imag_single",
encoding_modality       = "visual",
encoding_depth          = "shallow",
VVIQ_score              = sample(21:80, quarter_rows),
true_recall_proportion  = rnorm(quarter_rows, mean = 0.70, sd = 0.1),
false_recall_proportion = rnorm(quarter_rows, mean = 0.50, sd = 0.25)
)
# visual deep data
visual_deep_a <- data.frame(
participant             = (half_rows + quarter_rows + 1):num_rows,
encoding_strategy       = "imag_association",
encoding_modality       = "visual",
encoding_depth          = "deep",
VVIQ_score              = sample(21:80, num_rows - half_rows - quarter_rows),
true_recall_proportion  = rnorm(num_rows - half_rows - quarter_rows, mean = 0.70, sd = 0.1),
false_recall_proportion = rnorm(num_rows - half_rows - quarter_rows, mean = 0.50, sd = 0.25)
)
# Get the visual part of the data set
visual_data_a <- rbind(visual_shallow_a, visual_deep_a)
# Get the full data set
toy_set_a <- rbind(verbal_data_a, visual_data_a)
# Log the results
knitr::kable(toy_set_a, caption = "Toy Set A")
# Sources:
#   1) https://dplyr.tidyverse.org/reference/summarise.html
#   2) https://dplyr.tidyverse.org/reference/filter.html
# Group by modality (visual vs verbal)
grouped_toy_set_a <- group_by(toy_set_a, encoding_modality)
# Get mean and se for visual and verbal group
group_info_a <- summarise(
grouped_toy_set_a,
mean = mean(true_recall_proportion),
se = sd(true_recall_proportion) / sqrt(n())
)
# Extract verbal values
verbal_mean_a <- group_info_a$mean[group_info_a$encoding_modality == "verbal"]
verbal_se_a   <- group_info_a$se[group_info_a$encoding_modality == "verbal"]
# Extract visual values
visual_mean_a <- group_info_a$mean[group_info_a$encoding_modality == "visual"]
visual_se_a   <- group_info_a$se[group_info_a$encoding_modality == "visual"]
# Log the results
cat(
"Toy Set A\n",
"=========\n",
sprintf("Verbal Mean: %.6f\n", verbal_mean_a),
sprintf("Verbal Standard Error: %.6f\n", verbal_se_a),
sprintf("Visual Mean: %.6f\n", visual_mean_a),
sprintf("Visual Standard Error: %.6f\n", visual_se_a)
)
# Sources:
#   1) https://www.dataquest.io/blog/how-to-create-a-dataframe-in-r/
#   2) https://www.digitalocean.com/community/tutorials/get-number-of-rows-and-columns-in-r
#   3) https://stat.ethz.ch/R-manual/R-devel/library/base/html/Arithmetic.html
#   4) https://www.spsanderson.com/steveondata/posts/2025-05-26/
#   5) https://stackoverflow.com/questions/8169323/r-concatenate-two-dataframes
# Gets the number of subjects (rows) in the actual data
num_rows <- nrow(participant_level_data)
# Floor division to handle odd num participants (not true here but why not future-proof)
half_rows <- num_rows %/% 2
# Floor division to handle odd num participants (not true here but why not future-proof)
quarter_rows <- half_rows %/% 2
# make data for verbal condition
set.seed(62)
# verbal shallow data
verbal_shallow_b <- data.frame(
participant             = 1:quarter_rows,
encoding_strategy       = "verb_single",
encoding_modality       = "verbal",
encoding_depth          = "shallow",
VVIQ_score              = sample(21:80, quarter_rows),
true_recall_proportion  = rnorm(quarter_rows, mean = 0.50, sd = 0.1),
false_recall_proportion = rnorm(quarter_rows, mean = 0.50, sd = 0.25)
)
# verbal deep data
verbal_deep_b <- data.frame(
participant             = (quarter_rows + 1):half_rows,
encoding_strategy       = "verb_association",
encoding_modality       = "verbal",
encoding_depth          = "deep",
VVIQ_score              = sample(21:80, half_rows - quarter_rows),
true_recall_proportion  = rnorm(half_rows - quarter_rows, mean = 0.50, sd = 0.1),
false_recall_proportion = rnorm(half_rows - quarter_rows, mean = 0.50, sd = 0.25)
)
# Get the verbal part of the data set
verbal_data_b <- rbind(verbal_shallow_b, verbal_deep_b)
# make data for visual condition
set.seed(92)
# visual shallow data
visual_shallow_b <- data.frame(
participant             = (half_rows + 1):(half_rows + quarter_rows),
encoding_strategy       = "imag_single",
encoding_modality       = "visual",
encoding_depth          = "shallow",
VVIQ_score              = sample(21:80, quarter_rows),
true_recall_proportion  = rnorm(quarter_rows, mean = 0.50, sd = 0.1),
false_recall_proportion = rnorm(quarter_rows, mean = 0.50, sd = 0.25)
)
# visual deep data
visual_deep_b <- data.frame(
participant             = (half_rows + quarter_rows + 1):num_rows,
encoding_strategy       = "imag_association",
encoding_modality       = "visual",
encoding_depth          = "deep",
VVIQ_score              = sample(21:80, num_rows - half_rows - quarter_rows),
true_recall_proportion  = rnorm(num_rows - half_rows - quarter_rows, mean = 0.50, sd = 0.1),
false_recall_proportion = rnorm(num_rows - half_rows - quarter_rows, mean = 0.50, sd = 0.25)
)
# Get the visual part of the data set
visual_data_b <- rbind(visual_shallow_b, visual_deep_b)
# Get the full data set
toy_set_b <- rbind(verbal_data_b, visual_data_b)
# Log the results
knitr::kable(toy_set_b, caption = "Toy Set B")
# Sources:
#   1) https://dplyr.tidyverse.org/reference/summarise.html
#   2) https://dplyr.tidyverse.org/reference/filter.html
# Group by modality (visual vs verbal)
grouped_toy_set_b <- group_by(toy_set_b, encoding_modality)
# Get mean and se for visual and verbal group
group_info_b <- summarise(
grouped_toy_set_b,
mean = mean(true_recall_proportion),
se = sd(true_recall_proportion) / sqrt(n())
)
# Extract verbal values
verbal_mean_b <- group_info_b$mean[group_info_b$encoding_modality == "verbal"]
verbal_se_b   <- group_info_b$se[group_info_b$encoding_modality == "verbal"]
# Extract visual values
visual_mean_b <- group_info_b$mean[group_info_b$encoding_modality == "visual"]
visual_se_b   <- group_info_b$se[group_info_b$encoding_modality == "visual"]
# Log the results
# Log the results
cat(
"Toy Set B\n",
"=========\n",
sprintf("Verbal Mean: %.6f\n", verbal_mean_b),
sprintf("Verbal Standard Error: %.6f\n", verbal_se_b),
sprintf("Visual Mean: %.6f\n", visual_mean_b),
sprintf("Visual Standard Error: %.6f\n", visual_se_b)
)
# Sources:
#   1) https://dplyr.tidyverse.org/reference/summarise.html
#   2) https://dplyr.tidyverse.org/reference/filter.html
# Group by modality (visual vs verbal)
grouped_real_data <- group_by(participant_level_data, encoding_modality)
# Get mean and se for visual and verbal group
group_info_real <- summarise(
grouped_real_data,
mean = mean(true_recall_proportion),
se = sd(true_recall_proportion) / sqrt(n())
)
# Extract verbal values
verbal_mean_real <- group_info_real$mean[group_info_real$encoding_modality == "verbal"]
verbal_se_real   <- group_info_real$se[group_info_real$encoding_modality == "verbal"]
# Extract visual values
visual_mean_real <- group_info_real$mean[group_info_real$encoding_modality == "visual"]
visual_se_real   <- group_info_real$se[group_info_real$encoding_modality == "visual"]
# Log the results
cat(
"Real Data\n",
"=========\n",
sprintf("Verbal Mean: %.6f\n", verbal_mean_real),
sprintf("Verbal Standard Error: %.6f\n", verbal_se_real),
sprintf("Visual Mean: %.6f\n", visual_mean_real),
sprintf("Visual Standard Error: %.6f\n", visual_se_real)
)
# Sources
#   1) https://www.w3schools.com/R/r_functions.asp
#   2) https://www.w3schools.com/r/r_for_loop.asp
#   3) https://www.scribbr.com/frequently-asked-questions/how-do-i-find-quartiles-in-r/
# Note: I found it strange that we return a list instead of a logicla vector
# I did this to stick to the assignment wording but it is weird since you ahve to unlist() it later
find_outlier = function(num_list){
# Get quantiles and calculate IQR
quartiles <- quantile(num_list, prob=c(.25,.5,.75), type=1)
Q1 <- quartiles[1]
Q3 <- quartiles[3]
IQR <- Q3 - Q1
# Find our outlier bounds
lower_bound <- Q1 - (1.5 * IQR)
upper_bound <- Q3 + (1.5 * IQR)
# Prep a results list for our booleans
results_list <- list()
# Iterate and construct the outlier boolean list
for (data_point in num_list) {
# If point falls outside of non-outlier range, then set value to TRUE
if (data_point < lower_bound | data_point > upper_bound) {
results_list <- c(results_list, TRUE)
}
# Otherwise, participant is not an outlier so set to FALSE
else {
results_list <- c(results_list, FALSE)
}
}
# Return the list
return(results_list)
}
# Sources
#   1) https://codesignal.com/learn/courses/data-manipulation-in-r/lessons/exploring-data-frames-with-boolean-selection-in-r
# Extract the false recall column
false_recall_real <- participant_level_data$false_recall_proportion
# Get boolean list for which participants are outliers
false_recall_outliers_mask <- find_outlier(false_recall_real)
# Subset the participant df to get which ones are outliers
false_recall_outliers <- participant_level_data[unlist(false_recall_outliers_mask), ]
# Print the data
knitr::kable(
false_recall_outliers,
caption = "False Recall Proportion Outliers"
)
# Sources
#   1) https://codesignal.com/learn/courses/data-manipulation-in-r/lessons/exploring-data-frames-with-boolean-selection-in-r
# Extract the false recall column
vviq_real <- participant_level_data$VVIQ_score
# Get boolean list for which participants are outliers
vviq_outliers_mask <- find_outlier(vviq_real)
# Subset the participant df to get which ones are outliers
vviq_outliers <- participant_level_data[unlist(vviq_outliers_mask), ]
# Print the data
knitr::kable(
vviq_outliers,
caption = "VVIQ Score Outliers"
)
# Sources
#   1) https://www.datamentor.io/r-programming/histogram
#   2) https://www.datacamp.com/doc/r/scatterplot-in-r
#   3) https://r-graph-gallery.com/4-barplot-with-error-bar.html
# Get true recall proportion data for each data set
true_recall_graph_data_a <- toy_set_a$true_recall_proportion
true_recall_graph_data_b <- toy_set_b$true_recall_proportion
true_recall_graph_data_real <- participant_level_data$true_recall_proportion
# HISTOGRAMS
# ================================
# Toy Data A
# -------------------
hist(true_recall_graph_data_a,
main = "Frequency of True Recall Proportions (Toy Set A)",
xlab = "True Recall Proportion",
xlim = c(0,1),
col  = "red",
)
# -------------------
# Toy Data B
# -------------------
hist(true_recall_graph_data_b,
main = "Frequency of True Recall Proportions (Toy Set B)",
xlab = "True Recall Proportion",
xlim = c(0,1),
col  = "blue",
)
# -------------------
# Actual Class Data
# -------------------
hist(true_recall_graph_data_real,
main = "Frequency of True Recall Proportions (Actual Data)",
xlab = "True Recall Proportion",
xlim = c(0,1),
col  = "orange",
)
# -------------------
# ================================
# SCATTERPLOTS
# ================================
# Toy Data A
# -------------------
x_vals_a <- ifelse(toy_set_a$encoding_modality == "verbal", 0.9, 1.1)
plot(
x_vals_a,
toy_set_a$true_recall_proportion,
col = ifelse(toy_set_a$encoding_modality == "verbal", "orange", "purple"),
pch = 16,
xaxt = "n",
xlab = "Encoding Modality",
ylab = "True Recall Proportion",
xlim = c(0.8, 1.2),
ylim = c(0, 1),
main = "True Recall Proportion by Modality (Toy Set A)"
)
axis(1, at = c(0.9, 1.1), labels = c("Verbal", "Visual"))
# -------------------
# Toy Data B
# -------------------
x_vals_b <- ifelse(toy_set_b$encoding_modality == "verbal", 0.9, 1.1)
plot(
x_vals_b,
toy_set_b$true_recall_proportion,
col = ifelse(toy_set_b$encoding_modality == "verbal", "orange", "purple"),
pch = 16,
xaxt = "n",
xlab = "Encoding Modality",
ylab = "True Recall Proportion",
xlim = c(0.8, 1.2),
ylim = c(0, 1),
main = "True Recall Proportion by Modality (Toy Set B)"
)
axis(1, at = c(0.9, 1.1), labels = c("Verbal", "Visual"))
# -------------------
# Actual Class Data
# -------------------
x_vals_real <- ifelse(participant_level_data$encoding_modality == "verbal", 0.9, 1.1)
plot(
x_vals_real,
participant_level_data$true_recall_proportion,
col = ifelse(participant_level_data$encoding_modality == "verbal", "orange", "purple"),
pch = 16,
xaxt = "n",
xlab = "Encoding Modality",
ylab = "True Recall Proportion",
xlim = c(0.8, 1.2),
ylim = c(0, 1),
main = "True Recall Proportion by Modality (Actual Data)"
)
axis(1, at = c(0.9, 1.1), labels = c("Verbal", "Visual"))
# -------------------
# ================================
# BAR GRAPHS
# ================================
# Toy Data A
# -------------------
# Combine group means and standard errors
means_a <- c(verbal_mean_a, visual_mean_a)
ses_a   <- c(verbal_se_a, visual_se_a)
# Create bar plot
bar_positions_a <- barplot(
means_a,
names.arg = c("Verbal", "Visual"),
ylim = c(0, 1),
col = c("orange", "purple"),
ylab = "Mean True Recall Proportion",
main = "True Recall Proportion by Modality (Toy Set A)"
)
# Add error bars
arrows(
x0 = bar_positions_a,
y0 = means_a - ses_a,
x1 = bar_positions_a,
y1 = means_a + ses_a,
angle = 90,
code = 3,
length = 0.05
)
# -------------------
# Toy Data B
# -------------------
# Combine group means and standard errors
means_b <- c(verbal_mean_b, visual_mean_b)
ses_b   <- c(verbal_se_b, visual_se_b)
# Create the bar plot
bar_positions_b <- barplot(
means_b,
names.arg = c("Verbal", "Visual"),
ylim = c(0, 1),
col = c("orange", "purple"),
ylab = "Mean True Recall Proportion",
main = "True Recall Proportion by Modality (Toy Set B)"
)
# Add standard error bars
arrows(
x0 = bar_positions_b,
y0 = means_b - ses_b,
x1 = bar_positions_b,
y1 = means_b + ses_b,
angle = 90,
code = 3,
length = 0.05
)
# -------------------
# Actual Class Data
# -------------------
# Combine group means and standard errors
means_real <- c(verbal_mean_real, visual_mean_real)
ses_real   <- c(verbal_se_real, visual_se_real)
# Create the bar plot
bar_positions_real <- barplot(
means_real,
names.arg = c("Verbal", "Visual"),
ylim = c(0, 1),
col = c("orange", "purple"),
ylab = "Mean True Recall Proportion",
main = "True Recall Proportion by Modality (Actual Data)"
)
# Add standard error bars
arrows(
x0 = bar_positions_real,
y0 = means_real - ses_real,
x1 = bar_positions_real,
y1 = means_real + ses_real,
angle = 90,
code = 3,
length = 0.05
)
# -------------------
# Sources
#   1) https://www.geeksforgeeks.org/r-language/how-to-export-dataframe-to-csv-in-r/
write.csv(toy_set_a, "toy_set_a.csv", row.names = FALSE)
write.csv(toy_set_b, "toy_set_b.csv", row.names = FALSE)
write.csv(class_data, "class_data.csv", row.names = FALSE)
write.csv(participant_level_data, "participant_level_data.csv", row.names = FALSE)
cat(
"Saved CSV files\n",
"================\n",
"toy_set_a.csv\n",
"toy_set_b.csv\n",
"class_data.csv\n",
"participant_level_data.csv\n"
)
